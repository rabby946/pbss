<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=2  .0">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo.png') }}">
<title>{% block title %}Palashbaria Secondary School{% endblock %}</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

</head>

<body class="main-body">
  <style>
    /* ==========================================================================
   New Palashbaria School Header (Conflict-Proof)
   ========================================================================== */

/* ==========================================================================
   New Palashbaria School Header (Updated for Readability & Layout)
   ========================================================================== */

/* --- Component Variables --- */
:root {
    --pss-header-height: 80px; /* INCREASED: Taller header for bigger text */
    --pss-primary-accent: #6bbeb8ca;
    --pss-text-dark: #000000;
    --pss-text-light: #f3eeee;
    --pss-font-bengali: 'Noto Sans Bengali', sans-serif;
    --pss-font-english: 'Poppins', sans-serif;
}

/* --- Body class for when mobile drawer is open --- */
body.pss-drawer-open {
    overflow: hidden; /* Prevents background from scrolling */
}

/* --- Main Header Bar --- */
.pss-nav-header {
    height: var(--pss-header-height);
    width: 100%;
    position: sticky;
    top: 0;
    z-index: 2000;
    background-color: #e2f0c4cf;
  background: linear-gradient(90deg, rgba(203, 235, 160, 0.524) 0%, rgba(146, 210, 232, 0.53) 40%);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    padding-right: 30%;
}

.pss-nav-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* --- Logo Styling --- */
.pss-nav-logo {
    display: flex;
    align-items: center;
    gap: 35px; /* INCREASED: More space */
    text-decoration: none;
}
.pss-nav-logo:hover { background-color: #e2f0c441;
  
}
.pss-nav-logo__img { height: 50px; /* INCREASED: Larger logo */ }
.pss-nav-logo__text {
    font-family: var(--pss-font-bengali);
    font-size: 1.4rem; /* INCREASED: Much larger logo text */
    font-weight: 600;
    color: var(--pss-text-dark);
}

/* --- Desktop Navigation --- */
.pss-nav-menu__list {
    display: flex;
    align-items: center;
    gap: 0.2rem; /* INCREASED: More space between items */
    list-style: none;
    margin: 0;
    padding: 0;
}
.pss-nav-menu__link {
    font-family: var(--pss-font-english);
    font-size: 2.1rem; /* INCREASED: Larger link text */
    font-weight: 500;
    color: var(--pss-text-dark);
    text-decoration: none;
    padding: 10px 18px; /* INCREASED: Larger clickable area */
    border-radius: 8px;
    transition: background-color 0.3s ease, color 0.3s ease;
}
.pss-nav-menu__link:hover {
    background-color: rgba(6, 13, 77, 0.67);
    color: var(--pss-primary-accent);
    text-decoration: none;
}
.pss-nav-menu__link.active {
    background-color: var(--pss-primary-accent);
    color: var(--pss-text-light);
}

/* --- Hamburger Menu (Mobile) --- */
.pss-nav-hamburger {
    display: none;
    padding: 10px;
    cursor: pointer;
    background-color: transparent;
    border: none;
    z-index: 2002;
    padding-left: 70%;
}
.pss-nav-hamburger__bar {
    display: block;
    width: 28px; /* INCREASED: Bigger hamburger */
    height: 3px;
    margin: 6px 0;
    background-color: var(--pss-text-dark);
    border-radius: 3px;
    transition: transform 0.4s ease, opacity 0.4s ease, background-color 0.4s ease;
}
/* Change hamburger to white 'X' when menu is open */
.pss-nav-hamburger.is-active .pss-nav-hamburger__bar {
    background-color: var(--pss-text-dark);
}
.pss-nav-hamburger.is-active .pss-nav-hamburger__bar:nth-child(1) { transform: translateY(9px) rotate(45deg); }
.pss-nav-hamburger.is-active .pss-nav-hamburger__bar:nth-child(2) { opacity: 0; }
.pss-nav-hamburger.is-active .pss-nav-hamburger__bar:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }


/* ==========================================================================
   Responsive Styles for Mobile
   ========================================================================== */
@media (max-width: 2024px) { /* Widened breakpoint to show hamburger earlier */
    .pss-nav-hamburger {
        display: block;
        /* padding-left: 40%; */
    }
    
    /* --- NEW: Page overlay when drawer is open --- */
    .pss-nav-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.62); /* Dark overlay */
        z-index: 1999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.6s ease;
    }
    .pss-nav-overlay.is-visible {
        opacity: 1;
        visibility: visible;
    }

    /* --- UPDATED: Mobile menu is now a right-side drawer --- */
    .pss-nav-menu {
        position: fixed;
        top: 0;
        right: -300px; /* Start off-screen to the right */
        width: 300px;
        height: 100%;
        padding-top: var(--pss-header-height); /* Space for header */
        color: #00fe19;
        background-color: #a8b8c8; /* CHANGED: Solid, light background for readability */
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.282); /* Shadow for depth */
        
        transition: right 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        z-index: 2001;
    }

    /* Style for the OPEN mobile menu */
    .pss-nav-menu.is-open {
        right: 0; /* Slide in from the right */
    }
    
    .pss-nav-menu__list {
        flex-direction: column;
        align-items: flex-start; /* Align text to the left */
        gap: 0;
        padding: 1rem 0;
    }

    .pss-nav-menu__item {
        width: 100%;
        color: #00fe19;
    }

    .pss-nav-menu__link {
        display: block;
        width: 100%;
        font-size: 1.3rem; /* INCREASED: Large, readable text */
        padding: 1rem 2rem; /* INCREASED: Tall, easy-to-tap links */
        border-radius: 0;
        border-bottom: 1px solid #e9ecef;

    }
    .pss-nav-menu__link {
    display: block;
    width: 100%;
    font-size: 1.3rem; 
    padding: 1rem 2rem; 
    border-radius: 0;
    border-bottom: 1px solid #e9ecef;

    /* ▼▼▼ THIS IS THE LINE TO CHANGE ▼▼▼ */
    color: var(--pss-text-light); /* Change this value */
}
  .pss-nav-menu__link.active {
    background-color: #004085; /* Dark blue background */
    color: #ffffff; /* White text */
  }
}
  </style>
<header class="pss-nav-header">
    <div class="pss-nav-container">
        
        <a href="{{ url_for('public.home') }}" class="pss-nav-logo">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Palashbaria School Logo" class="pss-nav-logo__img">
            
            <span class="pss-nav-logo__text">পলাশবাড়ীয়া মাধ্যমিক বিদ্যালয়</span>
        </a>

        <nav class="pss-nav-menu" id="pss-unique-nav-menu">
            <ul class="pss-nav-menu__list">
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.home') }}" class="pss-nav-menu__link {% if request.endpoint=='public.home' %}active{% endif %}">Home</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.news') }}" class="pss-nav-menu__link {% if request.endpoint=='public.news' %}active{% endif %}">News</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.teachers') }}" class="pss-nav-menu__link {% if request.endpoint=='public.teachers' %}active{% endif %}">Teachers</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.committees') }}" class="pss-nav-menu__link {% if request.endpoint=='public.committees' %}active{% endif %}">Committees</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.students') }}" class="pss-nav-menu__link {% if request.endpoint=='public.students' %}active{% endif %}">Students</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.routine') }}" class="pss-nav-menu__link {% if request.endpoint=='public.routine' %}active{% endif %}">Routine</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.results') }}" class="pss-nav-menu__link {% if request.endpoint=='public.results' %}active{% endif %}">Results</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.gallery') }}" class="pss-nav-menu__link {% if request.endpoint=='public.gallery' %}active{% endif %}">Gallery</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.mpos') }}" class="pss-nav-menu__link {% if request.endpoint=='public.mpos' %}active{% endif %}">Accreditations</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('public.contact') }}" class="pss-nav-menu__link {% if request.endpoint=='public.contact' %}active{% endif %}">Contact</a></li>
                <li class="pss-nav-menu__item"><a href="{{ url_for('admin.login') }}" class="pss-nav-menu__link {% if request.endpoint=='admin.login' %}active{% endif %}">Dashboard</a></li>
            </ul>
        </nav>
        
        <button class="pss-nav-hamburger" id="pss-unique-hamburger" aria-label="Toggle navigation" aria-expanded="false">
            <span class="pss-nav-hamburger__bar"></span>
            <span class="pss-nav-hamburger__bar"></span>
            <span class="pss-nav-hamburger__bar"></span>
        </button>

    </div>
</header>

<main class="container" style="padding-top: 40px;">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, msg in messages %}
      <div class="glass-card message-card" style="color: {% if category == 'error' %}red{% else %}green{% endif %};">{{ msg }}</div>
    {% endfor %}
  {% endwith %}
  {% block content %}{% endblock %}
</main>


<script>
  function toggleDrawer() {
    const nav = document.getElementById('nav-drawer');
    nav.classList.toggle('open');
  }
</script>
<script src="{{ url_for('static', filename='script.js') }}"></script>


<div id="chatbot-icon">
  💬

</div>

<div id="chat-popup">
  <div id="chat-header">
    <span>Palashbaria School AI Assistant</span>
    <button id="chat-close">×</button>
  </div>
  <div id="chat-messages">
    <div class="message bot">
      <div class="message-content">
        Hello! I'm here to help you learn about Palashbaria Secondary School. Ask me anything about the school's history, facilities, staff, or programs!
      </div>
    </div>
  </div>
  <div class="typing-indicator" id="typing-indicator">AI is typing...</div>
  <div id="chat-input-area">
    <input type="text" id="chat-input" placeholder="Ask me about the school..." />
    <button id="send-btn">Send</button>
  </div>
</div>
<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-col">
      <h4>About</h4>
      <p>Palashbaria Secondary School is committed to academic excellence and character building.</p>
    </div>
    <div class="footer-col">
      <h4>Contact</h4>
      <p>Email: s118044@gmail.com<br>Phone: 01714850660</p>
    </div>
    <div class="footer-col">
      <h4>Follow Us</h4>
      <p><a href="https://www.facebook.com" target="_blank">Facebook</a><br><a href="https://twitter.com">Twitter</a><br><a href="https://instagram.com">Instagram</a></p>
    </div>
  </div>
</footer>

<script>
  const chatIcon = document.getElementById('chatbot-icon');
  const chatPopup = document.getElementById('chat-popup');
  const chatClose = document.getElementById('chat-close');
  const sendBtn = document.getElementById('send-btn');
  const chatInput = document.getElementById('chat-input');
  const chatMessages = document.getElementById('chat-messages');
  const typingIndicator = document.getElementById('typing-indicator');

  // Toggle chat popup
  chatIcon.addEventListener('click', () => {
    chatPopup.style.display = chatPopup.style.display === 'flex' ? 'none' : 'flex';
    if (chatPopup.style.display === 'flex') {
      chatInput.focus();
    }
  });

  // Close chat popup
  chatClose.addEventListener('click', () => {
    chatPopup.style.display = 'none';
  });

  // Send message on button click
  sendBtn.addEventListener('click', sendMessage);

  // Send message on Enter key press
  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });

  async function sendMessage() {
    const userMsg = chatInput.value.trim();
    if (!userMsg || sendBtn.disabled) return;

    // Add user message
    addMessage('user', userMsg);
    chatInput.value = '';
    
    // Disable input while processing
    sendBtn.disabled = true;
    sendBtn.textContent = 'Sending...';
    chatInput.disabled = true;
    
    // Show typing indicator
    typingIndicator.style.display = 'block';
    chatMessages.scrollTop = chatMessages.scrollHeight;

    try {
      const res = await fetch('/ai-chat', {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify({ message: userMsg }),
      });

      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`);
      }

      const data = await res.json();
      
      // Hide typing indicator
      typingIndicator.style.display = 'none';
      
      // Add AI response
      addMessage('bot', data.answer || data.response || 'Sorry, I couldn\'t understand that.');
      
    } catch (err) {
      console.error('Chat error:', err);
      typingIndicator.style.display = 'none';
      addMessage('bot', 'Sorry, I\'m having trouble connecting right now. Please try again later.');
    } finally {
      // Re-enable input
      sendBtn.disabled = false;
      sendBtn.textContent = 'Send';
      chatInput.disabled = false;
      chatInput.focus();
    }
  }

  function addMessage(sender, message) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    
    const messageContent = document.createElement('div');
    messageContent.className = 'message-content';
    messageContent.textContent = message;
    
    messageDiv.appendChild(messageContent);
    chatMessages.appendChild(messageDiv);
    
    // Scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  // Auto-focus input when popup opens
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
        if (chatPopup.style.display === 'flex') {
          setTimeout(() => chatInput.focus(), 100);
        }
      }
    });
  });

  observer.observe(chatPopup, {
    attributes: true,
    attributeFilter: ['style']
  });
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Staggered Animation for Cards ---
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.animationDelay = `${entry.target.dataset.index * 0.08}s`;
        entry.target.classList.add('in-view');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.content-card').forEach((card, index) => {
    card.dataset.index = index;
    observer.observe(card);
  });

  // --- Live Filter for Teachers/Students ---
  const filterInput = document.getElementById('filter-input');
  if (filterInput) {
    const cards = document.querySelectorAll('.person-card');
    const noResultsMessage = document.getElementById('no-results-message');

    filterInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      let visibleCount = 0;

      cards.forEach(card => {
        const name = card.querySelector('h3').textContent.toLowerCase();
        if (name.includes(searchTerm)) {
          card.style.display = 'block';
          visibleCount++;
        } else {
          card.style.display = 'none';
        }
      });
      
      noResultsMessage.style.display = visibleCount === 0 ? 'block' : 'none';
    });
  }
});
// --- Contact Page Interactivity ---
const contactForm = document.getElementById('contact-form');

if (contactForm) {
  const formResult = document.getElementById('form-result');

  // --- Copy to Clipboard ---
  document.querySelectorAll('.copy-btn').forEach(button => {
    button.addEventListener('click', () => {
      const textToCopy = button.dataset.copy;
      navigator.clipboard.writeText(textToCopy).then(() => {
        const originalIcon = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check"></i> Copied!';
        setTimeout(() => {
          button.innerHTML = originalIcon;
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy: ', err);
      });
    });
  });

  // --- Form Validation & Submission ---
  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    let isValid = true;
    formResult.style.display = 'none';

    // Simple validation
    ['name', 'email', 'subject', 'message'].forEach(id => {
      const field = document.getElementById(id);
      const errorEl = document.getElementById(`${id}-error`);
      if (!field.value.trim()) {
        errorEl.style.display = 'block';
        isValid = false;
      } else {
        errorEl.style.display = 'none';
      }
    });

    // Email format validation
    const emailField = document.getElementById('email');
    const emailError = document.getElementById('email-error');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (emailField.value.trim() && !emailRegex.test(emailField.value)) {
      emailError.textContent = 'Please enter a valid email address.';
      emailError.style.display = 'block';
      isValid = false;
    }

    if (!isValid) return;

    // --- AJAX Submission ---
    const submitBtn = document.getElementById('submit-btn');
    const originalBtnText = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Sending...';

    const formData = new FormData(contactForm);
    
    // NOTE: You need to create a backend endpoint (e.g., in Flask) at '/submit-contact' to receive this data.
    fetch('/submit-contact', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      formResult.style.display = 'block';
      if (data.success) {
        formResult.className = 'success';
        formResult.textContent = 'Thank you! Your message has been sent successfully.';
        contactForm.reset();
      } else {
        formResult.className = 'error';
        formResult.textContent = 'Sorry, there was an error. Please try again later.';
      }
    })
    .catch(error => {
      formResult.style.display = 'block';
      formResult.className = 'error';
      formResult.textContent = 'An unexpected error occurred. Please check your connection.';
      console.error('Error:', error);
    })
    .finally(() => {
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalBtnText;
    });
  });
}
document.addEventListener('DOMContentLoaded', function() {
    
    // --- 1. Live Search Functionality ---
    const searchInput = document.getElementById('committeeSearch');
    if (searchInput) {
        const committeeCards = document.querySelectorAll('.ts-card');
        const noResultsMessage = document.getElementById('noResultsMessage');

        searchInput.addEventListener('keyup', (event) => {
            const searchTerm = event.target.value.toLowerCase();
            let visibleCards = 0;

            committeeCards.forEach(card => {
                const name = card.dataset.name.toLowerCase();
                const position = card.dataset.position.toLowerCase();

                if (name.includes(searchTerm) || position.includes(searchTerm)) {
                    card.style.display = 'block';
                    visibleCards++;
                } else {
                    card.style.display = 'none';
                }
            });
            noResultsMessage.style.display = visibleCards === 0 ? 'block' : 'none';
        });
    }

    // --- 2. Scroll Reveal Animation ---
    const animatedCards = document.querySelectorAll('.ts-card');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.1 // Trigger when 10% of the card is visible
    });

    animatedCards.forEach(card => {
        observer.observe(card);
    });
});// --- Script for the New Responsive Header (Updated for Right-Side Drawer) ---
document.addEventListener('DOMContentLoaded', () => {

    const hamburgerButton = document.getElementById('pss-unique-hamburger');
    const navMenu = document.getElementById('pss-unique-nav-menu');
    const body = document.body;

    // --- Create the page overlay element ---
    const overlay = document.createElement('div');
    overlay.className = 'pss-nav-overlay';
    body.appendChild(overlay);

    // Function to open the menu
    const openMenu = () => {
        hamburgerButton.classList.add('is-active');
        navMenu.classList.add('is-open');
        overlay.classList.add('is-visible');
        body.classList.add('pss-drawer-open'); // Prevents body scrolling
    };

    // Function to close the menu
    const closeMenu = () => {
        hamburgerButton.classList.remove('is-active');
        navMenu.classList.remove('is-open');
        overlay.classList.remove('is-visible');
        body.classList.remove('pss-drawer-open');
    };

    // Event listener for the hamburger button
    if (hamburgerButton && navMenu) {
        hamburgerButton.addEventListener('click', () => {
            // If menu is already open, close it. Otherwise, open it.
            if (navMenu.classList.contains('is-open')) {
                closeMenu();
            } else {
                openMenu();
            }
        });

        // Event listener for the overlay (to close the menu when clicking outside)
        overlay.addEventListener('click', closeMenu);
    }
});
</script>
<style>
  /* This small style block is for the JS animation to work */
  .content-card { opacity: 0; }
  .content-card.in-view { opacity: 2; transform: translateY(1); }
</style>

</body>
</html>
